/* 1. CRIANDO USUARIO */
create user joaolucas;

/* 2. CRIANDO O BANCO DE DADOS */
CREATE DATABASE uvv;

/* 3. COLOCANDO PRA USAR O BANCO DE DADOS */
USE uvv;

/* 4.0 CRIAÇÃO DAS TABELAS E OS RELACIONAMENTOS */

/* 4.1 CRIAÇÃO DA TABELA FUNCIONARIO */

CREATE TABLE funcionario (
    cpf CHAR (11) NOT NULL,
    primeiro_nome VARCHAR(15) NOT NULL,
    nome_meio CHAR (1),
    ultimo_nome VARCHAR(15) NOT NULL,
    data_nascimento DATE,
    endereco VARCHAR (50),
    sexo CHAR (1),
    salario DECIMAL(10,2),
    cpf_supervisor CHAR (11) ,
    numero_departamento int NOT NULL,
    PRIMARY KEY (cpf),
    FOREIGN KEY (cpf_supervisor) REFERENCES funcionario (cpf)
);
/* 4.2 CRIAÇÃO DA TABELA DEPENDENTE */

CREATE TABLE dependente (
   cpf_funcionario CHAR (11),
   nome_dependente VARCHAR (15),
   sexo CHAR (1),
   data_nascimento DATE,
   parentesco VARCHAR (15),
   PRIMARY KEY (cpf_funcionario, nome_dependente),
   FOREIGN KEY (cpf_funcionario) REFERENCES funcionario (cpf)
);

/* 4.3 CRIAÇÃO DA TABELA DEPARTAMENTO */

CREATE TABLE departamento (
   numero_departamento INT,
   nome_departamento VARCHAR (15) NOT NULL,
   cpf_gerente CHAR (11),
   data_inicio_gerente DATE,
   PRIMARY KEY (numero_departamento),
   FOREIGN KEY (cpf_gerente) REFERENCES funcionario (cpf_supervisor),
   UNIQUE (nome_departamento)
);

/* 4.4 CRIAÇÃO DA TABELA LOCALIZACOES_DEPARTAMENTO */

CREATE TABLE localizacoes_departamento(
  numero_departamento INT,
  local VARCHAR (11),
  PRIMARY KEY (numero_departamento, LOCAL),
  FOREIGN KEY (numero_departamento) REFERENCES departamento (numero_departamento)
);

/* 4.5 CRIAÇÃO DA TABELA PROJETO */

CREATE TABLE projeto (
numero_projeto INT,
nome_projeto VARCHAR (15),
local_projeto VARCHAR (15),
numero_departamento INT,
PRIMARY KEY (numero_projeto),
FOREIGN KEY (numero_departamento) REFERENCES departamento (numero_departamento),
UNIQUE (nome_projeto)
);

/* 4.6 CRIAÇÃO DA TABELA TRABALHA_EM */

CREATE TABLE trabalha_em(
cpf_funcionario CHAR (11),
numero_projeto INT,
horas DECIMAL (3,1) NOT NULL,
PRIMARY KEY (cpf_funcionario, numero_projeto),
FOREIGN KEY (cpf_funcionario) REFERENCES funcionario (cpf),
FOREIGN KEY (numero_projeto) REFERENCES projeto (numero_projeto)
); 

/* FIM DA CRIAÇÃO DA DATABASE UVV */




